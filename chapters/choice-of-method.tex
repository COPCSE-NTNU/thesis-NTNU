\chapter{Choice of methods}

(copied from RPP, work from Mobile Spec. should be added here)

As the intended scope of the Master’s thesis consists of extending on an existing method of vessel predictions, the choice of methods mainly includes deciding on the most promising and expandable prediction method that is based on historical AIS data and shows a high level of accuracy. Next, the following phases are estimated to take place in the process: data evaluation, algorithm evaluation, algorithm improvements, and vessel availability pipeline.

\section{Choosing the most promising prediction method}

Further expanding on the expandability requirement, an important prerequisite is that it would be possible to apply Maritime Optima’s vessel segmentation to improve the model, thus the selected method would also have to support the possibility of labeling the dataset with additional information about the vessel. Another important prerequisite would be the possibility of applying the predicting method to a global set of vessels in order to forecast the vessel supply of availability. This could prove to be challenging in terms of setting up a scalable pipeline as well as making sure that the computation time is manageable either as a pre-computation step or on-demand computation of availability. However, for the scope of the thesis, only a prototype of the pipeline is expected to be completed.

Moreover, in the NTNU course called \textit{“IMT4889 - Specialization in mobile/wearable technologies”}, a similar, more specialized literature review was conducted by the author in order to provide a more in-depth analysis of the existing prediction methodologies. This literature was more specialized as it investigated existing prediction methods based on metrics such as relevance, performance, and development cost. The resulting report proposes prediction methods that show the most promise in regards to the evaluation criteria. The choice of methods is therefore based on two reviews of the current literature thoroughly analyzing the most prevalent prediction methods previously applied to similar problem areas. To summarize the findings of existing methods and the process of selecting prediction method:

The methods described in \cite{pallotta} seemed promising at predicting port destinations, however, only within a limited bounding area which had to include a substantial amount of systematic traffic. \cite{Daranda2016NeuralNA} described a method that could predict a trajectory of a vessel, but it did not seem applicable at predicting port destinations at a global scale. This assumption was also corroborated by \cite{ZHANG2020102729} in their analysis of related work: \textit{“[...] These works achieved promising prediction results on vessels’ destinations with limited options in a specific area. However, considering the combinations between global ports are more complicated than regional port, the existing methods presented in (Pallotta et al., 2013, Daranda, 2016, Wilson, 2017, Kim and Lee, 2018, Lin et al., 2018) could not be simply applied to the general vessel destination prediction globally.”}

The method described in \cite{Pelizzari2016GeneticAF} was also excluded as a good global prediction model as it is not known how well it performs at a global dataset and was only tested on two major ocean region with few obstacles and a considerable amount of traffic. Obstacles are relevant in this method as the algorithm creates its own optimal path between two areas and does not select an existing one. However, the method could be applied globally by fitting the model on every voyage between two ports in the world, and it could be improved by labeling the dataset with segmentations and training the model to consider these labels.

The method described in \cite{lechtenberg2019} showed promising results predicting regional availability for a single type of vessel. Although it was disclosed that port frequencies were used for the regional forecasting, it was not disclosed how well the model performed at port-based predictions. Furthermore, the geographical extent of the aforementioned regions was also not disclosed which would drastically affect accuracy as fewer larger regions would be easier to predict as many vessels might very well never leave a region or only travel between a low number of them.

From the investigated methods, it would seem that the approach described in \cite{ZHANG2020102729} is the most generic and promising approach to predicting vessels’ port destination. The paper proposes a method that compares a set of historical trajectories to a vessel’s current trajectory as well as considering visited port frequencies. An added benefit of the selected method described in the paper is that the model does not require complete retraining in the case where new ports or routes appear over time. This is beneficial as shipping lanes and routes may change as new ports open or seasonal passages open.

It should also be possible to apply vessel segmentation and more data to these datasets by labeling each historical trajectory, and port visit with the vessel’s segment and then only consider the relevant segment information for future predictions. Furthermore, as a global historical trajectory and port frequency data source can be implemented, it should also be possible to predict every vessels’ future destination ports in order to forecast availability.  The literature describing the method is also very extensive and explains the research process thoroughly which should make it easier to replicate and evaluate. The method used to compare and predict vessel trajectories is the random forest approach which is a well-established machine learning method praised for its ability to handle large data sets as well as missing data compared to neural networks \parencite{Randomforest_website} which is another benefit considering the varying data quality and coverage of AIS data.

Finally, it is worth noting that it is difficult to compare different prediction methods because they use different data sources, parameter tuning, and is applied in different contexts. Therefore, the more impactful factors of selecting a method are the promise of iterative improvements, scalability in terms of the number of vessels, and how well the method was explained in the literature including limitations and steps to reproduce. Based on these factors, the preferred method of choice of the Master’s thesis will consist of building upon the random forest approach described in \cite{ZHANG2020102729} investigating the impact of possible improvements, and investigating the possibility of scaling the algorithm to a global set of vessels.


\section{Data evaluation}

As mentioned later in \textbf{TODO 4.3}, data evaluation is an important first step in the algorithm evaluation process and the Master’s thesis in general. In order to evaluate a prediction model, it is first required to have a deep understanding of the quality of the data used for the evaluation. Data is supplied by the collaborative company Maritime Optima AS (MO) who has already done some quality assurance, but more in-depth analysis is required for the purpose of the thesis. To evaluate the data there are two main aspects to consider: the data coverage, and general quality or coherence. 

To evaluate data quality, the estimated preferred method would be to count the number of AIS records transmitted in different areas of the globe. Ocean regions can relatively easily be divided into bounding areas and AIS records can be counted in each. Bounding areas could be defined as grids based on longitudinal and latitudinal whole-values for instance. Additionally, tools supplied by mapping tools like Mapbox \parencite{mapbox:online} can be used to draw heatmaps of AIS records. The heatmaps can then be visually inspected to further estimate coverage. Lastly, MO’s data providers can further help provide an overview of coverage. For example, Orbcomm \parencite{AISData_orbcom:online} advertises “the most comprehensive global AIS coverage” and is the main data provider of satellite AIS data for MO.

MO has already done some work on the quality, or cohesiveness, of their data, however, some methods to ensure this quality should be applied in the Master’s thesis. Cohesiveness represents how dense or coherent AIS records transmitted subsequently are. In other words, how well can cohesive trajectories be created from a series of geographical coordinates? A visualization tool displaying all subsequent coordinates transmitted from a single vessel has already been developed by the author using Mapbox’s JavaScript library and MO’s data source. To achieve sufficient evaluation in this area, some further work on this method is required to show multiple vessels and their trajectories and to use it to show a varied amount of different types of vessels. This combined with the existing work MO has done should provide sufficient knowledge to pursue algorithm evaluation.


\section{Algorithm evaluation}

In this stage, the chosen prediction model will be replicated and results will be compared and evaluated. The method selected describes a high level of implementation details which should make it possible to replicate. This stage will first consist of using the literature to replicate the existing method, train the model with MO’s dataset, and compare the results. This stage will use the same metrics and evaluation described in the paper including using a five-folder cross-validation method described as well as specific vessel test cases. In this stage, a general accuracy metric must be generated and compared to the paper’s described accuracy. If the values are significantly different, the foundation from the data quality step will be used to explain why. However, it will not be critically important that the results are equal because the impact factor of the suggested improvements could still be investigated even if the base accuracy differs.

\section{Algorithm improvements}

At this point, the replicated algorithm will be subject to the proposed improvements which include labeling the dataset with vessel segments and sub-segments provided by MO. For each historical trajectory used in comparisons, the trajectory’s creator vessel’s segmentation values will be saved. The same process must also be included for the aspect of port frequencies which the model also considers. It is estimated that the model will then have to be retrained with adjusted parameters to exclusively compare trajectories and port frequencies with vessels’ with matching segmentation values. Once the improvement has been implemented, a similar evaluation process should take place. It is important that this process is similar to the process described in the aforementioned algorithm evaluation stage in order for the results to be comparable.

\section{Vessel availability pipeline}

This final stage of the project includes applying the improved algorithm to a global set of vessels in order to forecast availability. The most important part of this work will be to develop a working prototype that can iteratively predict multiple vessels’ future destination ports up to a given time. Given time considerations, this process has multiple iterations considering that it might not be possible to achieve all of the wanted results. The first iteration includes a method of running the prediction model on a set of multiple vessels in order to predict their next destination port. The second iteration will extend the method’s capabilities by enabling it to predict future destinations beyond the next destination port. For vessels that do not have a current comparable trajectory, the port frequencies will be the main estimation factor that provides these values. This particular use-case has not been described in the selected paper, therefore, it takes place in a separate iteration in case it shows unexpected difficulties in implementation. The last iteration includes setting up a pipeline using MO’s cloud computing resources. In contrast to the prior stages which are prototype implementations of the model itself, this stage will explore the possibility of deploying the developed modules to a software cluster and making the prediction method available on-demand.




